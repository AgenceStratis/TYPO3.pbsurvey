window.Parsley.addValidator("matrixMincheck",{requirementType:"integer",validateNumber:function(d,e,c){var a=jQuery(c.$element).closest("[data-pbsurvey-matrix]");var b=a.find("input[type=radio]:checked").length;return 0===b||b>=e},messages:{en:"Not all of %s options have been selected"}});window.Parsley.addValidator("textMinimum",{requirementType:["integer","boolean"],validateString:function(e,d,f,c){var a=jQuery(c.$element).closest("[data-pbsurvey-matrix]");var b=a.find("input[type=text]").filter(function(){return $(this).val()!=""}).length;return(!f&&b===0)||b>=d},messages:{en:"Enter at least %s value"}});window.Parsley.addValidator("textMaximum",{requirementType:"integer",validateString:function(d,e,c){var a=jQuery(c.$element).closest("[data-pbsurvey-matrix]");var b=a.find("input[type=text]").filter(function(){return $(this).val()!=""}).length;return b<=e},messages:{en:"Enter no more than %s values"}});window.Parsley.addValidator("textRange",{requirementType:["number","number","boolean"],validateString:function(e,d,g,f,c){var a=jQuery(c.$element).closest("[data-pbsurvey-matrix]");var b=a.find("input[type=text]").filter(function(){return $(this).val()!=""}).length;return(!f&&b===0)||(b>=d&&b<=g)},messages:{en:"Enter at least %s and no more than %s values"}});window.Parsley.addValidator("equals",{requirementType:"integer",validateNumber:function(a,b){return 0===a||a===b},messages:{en:"The sum of all answers must add up to %s"}});window.Parsley.addValidator("dateMinimum",{requirementType:"string",validateString:function(c,d){var b=new Date(c.replace(/(\d{2})-(\d{2})-(\d{4})/,"$2/$1/$3"));var a=new Date(d.replace(/(\d{2})-(\d{2})-(\d{4})/,"$2/$1/$3"));return""===c||isNaN(b)?false:b>=a},messages:{en:"Enter a date that is greater than or equal to %s"}});window.Parsley.addValidator("additional",{requirementType:"string",validateMultiple:function(e,f,d){var c=jQuery.inArray("-1",e)>-1;var a=jQuery(d.$element).attr("data-parsley-additional");var b=jQuery("."+a).val();return !c||b!=""},validateString:function(e,f,d){var c=e==="-1";var a=jQuery(d.$element).attr("data-parsley-additional");var b=jQuery("."+a).val();return !c||b!=""},messages:{en:"Enter the additional value"}});window.Parsley.addValidator("dateMaximum",{requirementType:"string",validateString:function(c,d){var b=new Date(c.replace(/(\d{2})-(\d{2})-(\d{4})/,"$2/$1/$3"));var a=new Date(d.replace(/(\d{2})-(\d{2})-(\d{4})/,"$2/$1/$3"));return""===c||isNaN(b)?false:b<=a},messages:{en:"Enter a date that is less than or equal to %s"}});var pbsurveyForm=jQuery("#pbsurvey-form");pbsurveyForm.parsley().on("field:validated",function(){var a=$(".parsley-error").length===0;$(".page-error").toggleClass("hidden",a)});pbsurveyForm.find("input[data-pbsurvey-row]").click(function(){var a=jQuery(this).attr("data-pbsurvey-row");jQuery('input[data-pbsurvey-row="'+a+'"]').not(jQuery(this)).each(function(){this.checked=false})});pbsurveyForm.find("input[data-pbsurvey-reveal]").change(function(){var b=jQuery(this).is(":checked");var c=jQuery(this).val();var a=jQuery(this).attr("data-pbsurvey-reveal");if(b&&c==="-1"){jQuery("."+a).show()}else{jQuery("."+a).hide()}});pbsurveyForm.find("[data-pbsurvey-sum] input").change(function(){total=0;var a=jQuery(this).closest("[data-pbsurvey-sum]");var b=jQuery("#"+a.attr("data-pbsurvey-sum"));a.find("input").not(b).each(function(){var c=parseInt(jQuery(this).val());total+=isNaN(c)?0:c});b.val(total===0?"":total)});