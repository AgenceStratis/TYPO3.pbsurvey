<html
	xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
	data-namespace-typo3-fluid="true"
>

<div class="type-11{f:if(condition: item.styleclass, then: ' {item.styleclass}')}">
	<f:render section="labelHeader" arguments="{_all}" />
	<f:render partial="questionSubtext" arguments="{questionSubtext: item.questionSubtext}" />

	<div id="error-container-{item.uid}"></div>
	<fieldset id="error-class-{item.uid}" data-pbsurvey-sum="pbsurvey-{configuration.uid}-{item.uid}-remaining">
		<f:for each="{item.randomizedOptions}" as="option" iteration="optionIterator">
			<label>
				<span>
					{option.label}
				</span>
				<input
					type="text"
					name="pbsurvey_{configuration.uid}[{item.uid}][o]"
					value=""
					data-parsley-type="number"
					data-parsley-type-message="{f:render(partial: 'translate', arguments: {key: 'item.error.number.label', printf: '{0: option.label}'})}"
					data-parsley-errors-container="#error-container-{item.uid}"
					data-parsley-class-handler="#error-class-{item.uid}"
				/>
			</label>
		</f:for>
		<label for="pbsurvey-{configuration.uid}-{item.uid}-remaining">
			<span>
				<f:render partial="translate" arguments="{key: 'item.label.constantSum'}" />
			</span>
			<input
				type="text"
				disabled
				id="pbsurvey-{configuration.uid}-{item.uid}-remaining"
				value=""
				data-parsley-equals="{item.numberTotal}"
				data-parsley-equals-message="{f:render(partial: 'translate', arguments: {key: 'item.error.number.equals', printf: '{0: item.numberTotal}'})}"
				data-parsley-errors-container="#error-container-{item.uid}"
				data-parsley-class-handler="#error-class-{item.uid}"
				{f:render(section: 'optionsRequired', arguments: '{_all}')}
			/>
		</label>
	</fieldset>
</div>

<f:section name="labelHeader">
	<h2 class="label">
		{item.question}
		<em>
			<f:if condition="{item.optionsRequired}">
				<f:then>
					<f:render partial="translate" arguments="{key: 'item.label.number.optionsRequired', printf: '{0: item.numberTotal}'}" />
				</f:then>
				<f:else>
					<f:render partial="translate" arguments="{key: 'item.label.number', printf: '{0: item.numberTotal}'}" />
				</f:else>
			</f:if>
		</em>
	</h2>
</f:section>

<f:section name="optionsRequired">
	<f:if condition="{item.optionsRequired}">
		required
		data-parsley-required-message="{f:render(partial: 'translate', arguments: {key: 'item.error.optionsRequired.number'})}"
	</f:if>
</f:section>

</html>